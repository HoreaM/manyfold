<% return if problems.empty? %>
<%= card("secondary", Problem.model_name.human(count: 100)) do %>
  <% problems.each do |problem| %>
    <div class="clearfix">
      <%= turbo_stream_from problem %>
      <details>
        <summary>
          <%= problem_icon_tag(problem) %>
          <%= t("problems.model_file.%{cat}.title" % {cat: problem.category}) %>
        </summary>
        <div class="card mb-2">
          <div class="card-body">
            <p>
              <%= t("problems.model_file.%{cat}.description" % {cat: problem.category}, note: problem.note) %>
            </p>
            <% if problem.category == "duplicate" && !@duplicates.empty? %>
              <ul>
                <% @duplicates.each do |file| %>
                  <li><%= link_to "#{file.model.name}/#{file.filename}", [file.model, file] %></li>
                <% end %>
              </ul>
            <% end %>
            <div class="text-end"><%= render Components::ResolveButton.new(problem: problem, user: current_user) %></div>
          </div>
        </div>
      </details>
    </div>
  <% end %>
<% end %>
